<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>SkyAI — Free Local LLM</title>
  <script src="https://cdn.jsdelivr.net/npm/@mlc-ai/web-llm@0.2.25/dist/index.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { background: linear-gradient(135deg, #4f46e5, #9333ea); }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-6">

  <div class="bg-white w-full max-w-xl p-6 rounded-2xl shadow-xl">
    <h1 class="text-3xl font-bold text-center text-purple-700 mb-4">SkyAI</h1>

    <textarea id="prompt" class="w-full border p-3 rounded mb-4"
      rows="4" placeholder="Введите ваш запрос..."></textarea>

    <button id="send" 
      class="w-full bg-purple-700 text-white py-2 rounded-lg hover:bg-purple-800 transition">
      Отправить
    </button>

    <div id="response" class="mt-4 p-3 bg-gray-100 rounded min-h-[100px] whitespace-pre-wrap"></div>
  </div>


  <script>
    let engine;
    const responseDiv = document.getElementById("response");

    async function initModel() {
      responseDiv.textContent = "Загрузка модели SkyAI...";
      engine = await webllm.CreateWebWorkerEngine(
        new Worker("https://cdn.jsdelivr.net/npm/@mlc-ai/web-llm@0.2.25/dist/worker.js", { type: "module" }),
        { model: "Llama-3.2-1B-Instruct-q4f32_1" }
      );
      responseDiv.textContent = "Модель загружена! Можете писать запрос.";
    }

    initModel();

    document.getElementById("send").onclick = async () => {
      const prompt = document.getElementById("prompt").value.trim();
      if (!prompt) return;

      responseDiv.textContent = "Генерация ответа...";
      const reply = await engine.chat.completions.create({
        messages: [{ role: "user", content: prompt }]
      });

      responseDiv.textContent = reply.choices[0].message.content;
    };
  </script>

</body>
</html>
